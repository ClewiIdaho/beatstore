<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f0f23 100%);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
    }

    .beat-widget {
      width: 100%;
      max-width: 380px;
      background: rgba(255, 255, 255, 0.08);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border-radius: 24px;
      border: 1px solid rgba(255, 255, 255, 0.12);
      padding: 24px;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
    }

    .widget-header {
      text-align: center;
      margin-bottom: 20px;
    }

    .widget-header h1 {
      color: #fff;
      font-size: 12px;
      font-weight: 600;
      letter-spacing: 2px;
      text-transform: uppercase;
      opacity: 0.6;
    }

    .artwork-container {
      width: 100%;
      aspect-ratio: 1;
      border-radius: 20px;
      overflow: hidden;
      margin-bottom: 24px;
      background: linear-gradient(145deg, #2d1f4e 0%, #1a1333 100%);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
    }

    .music-icon {
      width: 80px;
      height: 80px;
      margin-bottom: 20px;
    }

    .music-icon svg {
      width: 100%;
      height: 100%;
      fill: url(#iconGradient);
    }

    .visualizer {
      display: flex;
      align-items: flex-end;
      justify-content: center;
      gap: 4px;
      height: 50px;
    }

    .bar {
      width: 6px;
      background: linear-gradient(to top, #8b5cf6, #ec4899);
      border-radius: 3px;
      transition: height 0.2s ease;
    }

    .bar:nth-child(1) { height: 20%; }
    .bar:nth-child(2) { height: 35%; }
    .bar:nth-child(3) { height: 50%; }
    .bar:nth-child(4) { height: 70%; }
    .bar:nth-child(5) { height: 100%; }
    .bar:nth-child(6) { height: 70%; }
    .bar:nth-child(7) { height: 50%; }
    .bar:nth-child(8) { height: 35%; }
    .bar:nth-child(9) { height: 20%; }

    .visualizer.playing .bar {
      animation: bounce 0.5s ease-in-out infinite alternate;
    }

    .bar:nth-child(1) { animation-delay: 0s; }
    .bar:nth-child(2) { animation-delay: 0.1s; }
    .bar:nth-child(3) { animation-delay: 0.2s; }
    .bar:nth-child(4) { animation-delay: 0.3s; }
    .bar:nth-child(5) { animation-delay: 0.4s; }
    .bar:nth-child(6) { animation-delay: 0.3s; }
    .bar:nth-child(7) { animation-delay: 0.2s; }
    .bar:nth-child(8) { animation-delay: 0.1s; }
    .bar:nth-child(9) { animation-delay: 0s; }

    @keyframes bounce {
      0% { transform: scaleY(0.3); }
      100% { transform: scaleY(1); }
    }

    .visualizer:not(.playing) .bar {
      height: 8px !important;
      animation: none;
    }

    .track-info {
      text-align: center;
      margin-bottom: 20px;
    }

    .track-title {
      color: #fff;
      font-size: 22px;
      font-weight: 700;
      margin-bottom: 6px;
    }

    .track-producer {
      color: rgba(255, 255, 255, 0.5);
      font-size: 14px;
    }

    .track-meta {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin-top: 12px;
      flex-wrap: wrap;
    }

    .meta-tag {
      background: rgba(139, 92, 246, 0.25);
      color: #c4b5fd;
      padding: 5px 12px;
      border-radius: 20px;
      font-size: 11px;
      font-weight: 600;
      text-transform: uppercase;
    }

    .progress-section {
      margin-bottom: 20px;
    }

    .progress-bar {
      width: 100%;
      height: 6px;
      background: rgba(255, 255, 255, 0.15);
      border-radius: 3px;
      cursor: pointer;
      overflow: hidden;
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #8b5cf6, #ec4899);
      border-radius: 3px;
      width: 0%;
      transition: width 0.1s linear;
    }

    .time-row {
      display: flex;
      justify-content: space-between;
      margin-top: 8px;
      font-size: 12px;
      color: rgba(255, 255, 255, 0.4);
      font-weight: 500;
    }

    .controls {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 20px;
      margin-bottom: 24px;
    }

    .ctrl-btn {
      background: transparent;
      border: none;
      cursor: pointer;
      padding: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .ctrl-btn svg {
      width: 22px;
      height: 22px;
      fill: rgba(255, 255, 255, 0.6);
      transition: all 0.2s;
    }

    .ctrl-btn:hover svg {
      fill: #fff;
      transform: scale(1.1);
    }

    .play-btn {
      width: 64px;
      height: 64px;
      background: linear-gradient(135deg, #8b5cf6, #ec4899);
      border: none;
      border-radius: 50%;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 8px 24px rgba(139, 92, 246, 0.5);
      transition: all 0.3s ease;
    }

    .play-btn:hover {
      transform: scale(1.08);
      box-shadow: 0 12px 32px rgba(139, 92, 246, 0.6);
    }

    .play-btn svg {
      width: 26px;
      height: 26px;
      fill: #fff;
    }

    .play-btn .pause-icon { display: none; }
    .play-btn.playing .play-icon { display: none; }
    .play-btn.playing .pause-icon { display: block; }

    .price-box {
      background: rgba(0, 0, 0, 0.25);
      border-radius: 16px;
      padding: 20px;
      border: 1px solid rgba(255, 255, 255, 0.08);
    }

    .price-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
    }

    .price-label {
      color: rgba(255, 255, 255, 0.5);
      font-size: 13px;
    }

    .price-amount {
      color: #fff;
      font-size: 28px;
      font-weight: 700;
    }

    .license-options {
      display: flex;
      gap: 8px;
      margin-bottom: 16px;
    }

    .license-btn {
      flex: 1;
      padding: 10px 8px;
      background: rgba(255, 255, 255, 0.06);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 10px;
      color: rgba(255, 255, 255, 0.6);
      font-size: 11px;
      font-weight: 600;
      text-transform: uppercase;
      cursor: pointer;
      transition: all 0.2s;
    }

    .license-btn:hover {
      background: rgba(255, 255, 255, 0.12);
      color: #fff;
    }

    .license-btn.active {
      background: linear-gradient(135deg, rgba(139, 92, 246, 0.4), rgba(236, 72, 153, 0.4));
      border-color: rgba(139, 92, 246, 0.6);
      color: #fff;
    }

    .buy-btn {
      width: 100%;
      padding: 16px;
      background: linear-gradient(135deg, #8b5cf6, #ec4899);
      border: none;
      border-radius: 14px;
      color: #fff;
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      box-shadow: 0 8px 24px rgba(139, 92, 246, 0.35);
      transition: all 0.3s;
    }

    .buy-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 12px 32px rgba(139, 92, 246, 0.5);
    }

    .buy-btn svg {
      width: 18px;
      height: 18px;
      fill: #fff;
    }

    audio { display: none; }
  </style>
</head>
<body>

<!-- SVG Definitions -->
<svg style="display:none;">
  <defs>
    <linearGradient id="iconGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#8b5cf6"/>
      <stop offset="100%" style="stop-color:#ec4899"/>
    </linearGradient>
  </defs>
</svg>

<div class="beat-widget">
  
  <div class="widget-header">
    <h1>ðŸ”¥ Featured Beat</h1>
  </div>

  <div class="artwork-container">
    <div class="music-icon">
      <svg viewBox="0 0 24 24">
        <path d="M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z"/>
      </svg>
    </div>
    <div class="visualizer" id="visualizer">
      <div class="bar"></div>
      <div class="bar"></div>
      <div class="bar"></div>
      <div class="bar"></div>
      <div class="bar"></div>
      <div class="bar"></div>
      <div class="bar"></div>
      <div class="bar"></div>
      <div class="bar"></div>
    </div>
  </div>

  <div class="track-info">
    <h2 class="track-title">Midnight Trap</h2>
    <p class="track-producer">Prod. by YourName</p>
    <div class="track-meta">
      <span class="meta-tag">140 BPM</span>
      <span class="meta-tag">Trap</span>
      <span class="meta-tag">C Minor</span>
    </div>
  </div>

  <div class="progress-section">
    <div class="progress-bar" id="progressBar">
      <div class="progress-fill" id="progressFill"></div>
    </div>
    <div class="time-row">
      <span id="currentTime">0:00</span>
      <span id="duration">0:00</span>
    </div>
  </div>

  <div class="controls">
    <button class="ctrl-btn" id="prevBtn">
      <svg viewBox="0 0 24 24"><path d="M6 6h2v12H6zm3.5 6l8.5 6V6z"/></svg>
    </button>
    <button class="play-btn" id="playBtn">
      <svg class="play-icon" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
      <svg class="pause-icon" viewBox="0 0 24 24"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></svg>
    </button>
    <button class="ctrl-btn" id="nextBtn">
      <svg viewBox="0 0 24 24"><path d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"/></svg>
    </button>
  </div>

  <div class="price-box">
    <div class="price-header">
      <span class="price-label">Starting at</span>
      <span class="price-amount" id="priceDisplay">$29.99</span>
    </div>
    <div class="license-options">
      <button class="license-btn active" data-price="29.99">Basic</button>
      <button class="license-btn" data-price="49.99">Premium</button>
      <button class="license-btn" data-price="149.99">Exclusive</button>
    </div>
    <button class="buy-btn" id="buyBtn">
      <svg viewBox="0 0 24 24"><path d="M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z"/></svg>
      Add to Cart
    </button>
  </div>

  <!-- REPLACE THIS URL WITH YOUR ACTUAL BEAT MP3 URL -->
  <audio id="audio" preload="metadata">
    <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" type="audio/mpeg">
  </audio>

</div>

<script>
(function() {
  const audio = document.getElementById('audio');
  const playBtn = document.getElementById('playBtn');
  const progressBar = document.getElementById('progressBar');
  const progressFill = document.getElementById('progressFill');
  const currentTimeEl = document.getElementById('currentTime');
  const durationEl = document.getElementById('duration');
  const visualizer = document.getElementById('visualizer');
  const priceDisplay = document.getElementById('priceDisplay');
  const licenseBtns = document.querySelectorAll('.license-btn');
  
  let isPlaying = false;

  function formatTime(sec) {
    if (isNaN(sec)) return '0:00';
    const m = Math.floor(sec / 60);
    const s = Math.floor(sec % 60);
    return m + ':' + (s < 10 ? '0' : '') + s;
  }

  playBtn.addEventListener('click', function() {
    if (isPlaying) {
      audio.pause();
      playBtn.classList.remove('playing');
      visualizer.classList.remove('playing');
    } else {
      audio.play();
      playBtn.classList.add('playing');
      visualizer.classList.add('playing');
    }
    isPlaying = !isPlaying;
  });

  audio.addEventListener('timeupdate', function() {
    const pct = (audio.currentTime / audio.duration) * 100;
    progressFill.style.width = pct + '%';
    currentTimeEl.textContent = formatTime(audio.currentTime);
  });

  audio.addEventListener('loadedmetadata', function() {
    durationEl.textContent = formatTime(audio.duration);
  });

  audio.addEventListener('ended', function() {
    isPlaying = false;
    playBtn.classList.remove('playing');
    visualizer.classList.remove('playing');
    progressFill.style.width = '0%';
  });

  progressBar.addEventListener('click', function(e) {
    const rect = progressBar.getBoundingClientRect();
    const pct = (e.clientX - rect.left) / rect.width;
    audio.currentTime = pct * audio.duration;
  });

  licenseBtns.forEach(function(btn) {
    btn.addEventListener('click', function() {
      licenseBtns.forEach(function(b) { b.classList.remove('active'); });
      btn.classList.add('active');
      priceDisplay.textContent = '$' + btn.getAttribute('data-price');
    });
  });

  document.getElementById('buyBtn').addEventListener('click', function() {
    // Replace with your cart/checkout logic
    window.parent.postMessage({ type: 'addToCart', price: priceDisplay.textContent }, '*');
  });
})();
</script>

</body>
</html>